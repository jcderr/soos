#!/bin/bash


DESCRIPTION="Internal docker script to run services"
USAGE="Do not call docker/run manually"
HELP=""

main () { 
    OPT_REQS="Y"

    if [ -n "$1" ]; then
        if [ "$1" = "--no-pip-install" ]; then
            OPT_REQS=""
            shift
        fi
    fi

    import_environment_vars

    if [ -n "${DEBUG}${SSH}" ]; then
        info "Starting SSHD"
        /usr/sbin/service ssh start
    fi

    if [ -n "${OPT_REQS}" ]; then
        pip_install_requirements
    fi
        
    PYTHONDONTWRITEBYTECODE=1 DEBUG=${DEBUG} bin/docker/server $@
}

source "$(dirname $0)/../sooz-common"
